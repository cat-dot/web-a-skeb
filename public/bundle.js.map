{"version":3,"file":"bundle.js","sources":["../node_modules/shake.js/shake.js","../node_modules/simplify-js/simplify.js","../src/skeb-case.js","../src/main.js","../src/touch-knob.js","../src/toggle-fullscreen.js"],"sourcesContent":["/*\n * Author: Alex Gibson\n * https://github.com/alexgibson/shake.js\n * License: MIT license\n */\n\n(function(global, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return factory(global, global.document);\n        });\n    } else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = factory(global, global.document);\n    } else {\n        global.Shake = factory(global, global.document);\n    }\n} (typeof window !== 'undefined' ? window : this, function (window, document) {\n\n    'use strict';\n\n    function Shake(options) {\n        //feature detect\n        this.hasDeviceMotion = 'ondevicemotion' in window;\n\n        this.options = {\n            threshold: 15, //default velocity threshold for shake to register\n            timeout: 1000 //default interval between events\n        };\n\n        if (typeof options === 'object') {\n            for (var i in options) {\n                if (options.hasOwnProperty(i)) {\n                    this.options[i] = options[i];\n                }\n            }\n        }\n\n        //use date to prevent multiple shakes firing\n        this.lastTime = new Date();\n\n        //accelerometer values\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n\n        //create custom event\n        if (typeof document.CustomEvent === 'function') {\n            this.event = new document.CustomEvent('shake', {\n                bubbles: true,\n                cancelable: true\n            });\n        } else if (typeof document.createEvent === 'function') {\n            this.event = document.createEvent('Event');\n            this.event.initEvent('shake', true, true);\n        } else {\n            return false;\n        }\n    }\n\n    //reset timer values\n    Shake.prototype.reset = function () {\n        this.lastTime = new Date();\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n    };\n\n    //start listening for devicemotion\n    Shake.prototype.start = function () {\n        this.reset();\n        if (this.hasDeviceMotion) {\n            window.addEventListener('devicemotion', this, false);\n        }\n    };\n\n    //stop listening for devicemotion\n    Shake.prototype.stop = function () {\n        if (this.hasDeviceMotion) {\n            window.removeEventListener('devicemotion', this, false);\n        }\n        this.reset();\n    };\n\n    //calculates if shake did occur\n    Shake.prototype.devicemotion = function (e) {\n        var current = e.accelerationIncludingGravity;\n        var currentTime;\n        var timeDifference;\n        var deltaX = 0;\n        var deltaY = 0;\n        var deltaZ = 0;\n\n        if ((this.lastX === null) && (this.lastY === null) && (this.lastZ === null)) {\n            this.lastX = current.x;\n            this.lastY = current.y;\n            this.lastZ = current.z;\n            return;\n        }\n\n        deltaX = Math.abs(this.lastX - current.x);\n        deltaY = Math.abs(this.lastY - current.y);\n        deltaZ = Math.abs(this.lastZ - current.z);\n\n        if (((deltaX > this.options.threshold) && (deltaY > this.options.threshold)) || ((deltaX > this.options.threshold) && (deltaZ > this.options.threshold)) || ((deltaY > this.options.threshold) && (deltaZ > this.options.threshold))) {\n            //calculate time in milliseconds since last shake registered\n            currentTime = new Date();\n            timeDifference = currentTime.getTime() - this.lastTime.getTime();\n\n            if (timeDifference > this.options.timeout) {\n                window.dispatchEvent(this.event);\n                this.lastTime = new Date();\n            }\n        }\n\n        this.lastX = current.x;\n        this.lastY = current.y;\n        this.lastZ = current.z;\n\n    };\n\n    //event handler\n    Shake.prototype.handleEvent = function (e) {\n        if (typeof (this[e.type]) === 'function') {\n            return this[e.type](e);\n        }\n    };\n\n    return Shake;\n}));\n","/*\n (c) 2017, Vladimir Agafonkin\n Simplify.js, a high-performance JS polyline simplification library\n mourner.github.io/simplify-js\n*/\n\n(function () { 'use strict';\n\n// to suit your point format, run search/replace for '.x' and '.y';\n// for 3D version, see 3d branch (configurability would draw significant performance overhead)\n\n// square distance between 2 points\nfunction getSqDist(p1, p2) {\n\n    var dx = p1.x - p2.x,\n        dy = p1.y - p2.y;\n\n    return dx * dx + dy * dy;\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(p, p1, p2) {\n\n    var x = p1.x,\n        y = p1.y,\n        dx = p2.x - x,\n        dy = p2.y - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = p2.x;\n            y = p2.y;\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = p.x - x;\n    dy = p.y - y;\n\n    return dx * dx + dy * dy;\n}\n// rest of the code doesn't care about point format\n\n// basic distance-based simplification\nfunction simplifyRadialDist(points, sqTolerance) {\n\n    var prevPoint = points[0],\n        newPoints = [prevPoint],\n        point;\n\n    for (var i = 1, len = points.length; i < len; i++) {\n        point = points[i];\n\n        if (getSqDist(point, prevPoint) > sqTolerance) {\n            newPoints.push(point);\n            prevPoint = point;\n        }\n    }\n\n    if (prevPoint !== point) newPoints.push(point);\n\n    return newPoints;\n}\n\nfunction simplifyDPStep(points, first, last, sqTolerance, simplified) {\n    var maxSqDist = sqTolerance,\n        index;\n\n    for (var i = first + 1; i < last; i++) {\n        var sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n        if (sqDist > maxSqDist) {\n            index = i;\n            maxSqDist = sqDist;\n        }\n    }\n\n    if (maxSqDist > sqTolerance) {\n        if (index - first > 1) simplifyDPStep(points, first, index, sqTolerance, simplified);\n        simplified.push(points[index]);\n        if (last - index > 1) simplifyDPStep(points, index, last, sqTolerance, simplified);\n    }\n}\n\n// simplification using Ramer-Douglas-Peucker algorithm\nfunction simplifyDouglasPeucker(points, sqTolerance) {\n    var last = points.length - 1;\n\n    var simplified = [points[0]];\n    simplifyDPStep(points, 0, last, sqTolerance, simplified);\n    simplified.push(points[last]);\n\n    return simplified;\n}\n\n// both algorithms combined for awesome performance\nfunction simplify(points, tolerance, highestQuality) {\n\n    if (points.length <= 2) return points;\n\n    var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\n\n    points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);\n    points = simplifyDouglasPeucker(points, sqTolerance);\n\n    return points;\n}\n\n// export as AMD module / Node module / browser or worker variable\nif (typeof define === 'function' && define.amd) define(function() { return simplify; });\nelse if (typeof module !== 'undefined') {\n    module.exports = simplify;\n    module.exports.default = simplify;\n} else if (typeof self !== 'undefined') self.simplify = simplify;\nelse window.simplify = simplify;\n\n})();\n","// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport 'simplify-js'; // imports simplify()\nimport 'shake.js'; // imports Shake\n\nclass Sketch {\n  constructor(startingPoint) {\n    this.path = [startingPoint];\n    this.erasedPaths = [];\n    this._lastAngle = null;\n  }\n\n  get lastPoint() {\n    return this.path[this.path.length - 1];\n  }\n\n  moveTo(point) {\n    point = {\n      x: parseFloat(point.x),\n      y: parseFloat(point.y)\n    }\n    const angle = Math.atan2(\n      point.x - this.lastPoint.x,\n      point.y - this.lastPoint.y\n    );\n\n    if (angle === this._lastAngle) {\n      this.path.pop();\n    }\n\n    this._lastAngle = angle;\n    this.path.push(point);\n  }\n\n  simplifyPath() {\n    this.path = simplify(this.path, 0.5);\n  }\n\n  shake() {\n    if (this.path.length > 1) {\n      this.erasedPaths.push(this.path);\n      this.path = [this.lastPoint];\n      return true;\n    }\n\n    return false;\n  }\n}\n\nexport class SkebCase extends HTMLElement {\n  constructor() {\n    super();\n    this._canDraw = true;\n    this._lastSketchAngle = null;\n\n    this._onShake = this._onShake.bind(this);\n    this._optimizeSketch = this._optimizeSketch.bind(this);\n    this._requestOptimizeSketch = this._requestOptimizeSketch.bind(this);\n    this._requestUpdateSketch = this._requestUpdateSketch.bind(this);\n    this._toggleDetail = this._toggleDetail.bind(this);\n    this._updateSketch = this._updateSketch.bind(this);\n  }\n\n  connectedCallback() {\n    this._sketchModel = new Sketch({ x: 10, y: 10 });\n\n    this._screen = this.querySelector('.screen');\n    this._activeSketch = this.querySelector('.active-sketch');\n    this._path = this.querySelector('.sketch-path');\n    this._stylus = this.querySelector('.sketch-stylus');\n\n    this._horzKnob = this.querySelector('.horz-knob');\n    this._vertKnob = this.querySelector('.vert-knob');\n\n    this.addEventListener('touch-knob-move', this._requestUpdateSketch, { capture: false, passive: true });\n    this.addEventListener('touch-knob-end', this._requestOptimizeSketch, { capture: false, passive: true });\n\n    this._shakeDetector = new Shake({ threshold: 5, timeout: 200 });\n    this._shakeDetector.start();\n    window.addEventListener('shake', this._onShake, { capture: false, passive: true });\n\n    this._shakeButton = this.querySelector('.button-shake');\n    this._shakeButton.addEventListener('click', this._onShake, { capture: false, passive: true });\n\n    this._detailButton = this.querySelector('.button-detail');\n    this._detailButton.addEventListener('click', this._toggleDetail, { capture: false, passive: true });\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('touch-knob-move', this._requestUpdateSketch);\n    this.removeEventListener('touch-knob-end', this._requestOptimizeSketch);\n\n    window.removeEventListener('shake', this._onShake, { capture: false, passive: true });\n    this._shakeButton.removeEventListener('click', this._onShake, { capture: false, passive: true });\n    this._shakeDetector.stop();\n\n    this._detailButton.removeEventListener('click', this._toggleDetail, { capture: false, passive: true });\n  }\n\n  _requestUpdateSketch() {\n    if (this._canDraw === true) {\n      this._canDraw = false;\n      window.requestAnimationFrame(this._updateSketch);\n    }\n  }\n\n  _requestOptimizeSketch() {\n    if (this._canDraw === true) {\n      this._canDraw = false;\n      window.requestAnimationFrame(this._optimizeSketch);\n    }\n  }\n\n  _updateSketch() {\n    this._sketchModel.moveTo({\n      x: this._horzKnob.value,\n      y: this._vertKnob.value\n    });\n    this._drawSketch();\n    this._canDraw = true;\n  }\n\n  _optimizeSketch() {\n    this._sketchModel.simplifyPath();\n    this._drawSketch();\n    this._canDraw = true;\n  }\n\n  _drawSketch() {\n    const path = this._sketchModel.path;\n    const start = path[0];\n    let svgPath = `M ${start.x - 2} ${start.y - 2} M ${start.x + 2} ${start.y + 2} M ${start.x} ${start.y}`;\n\n    for (let i = 1; i < path.length; i++) {\n      const point = path[i];\n      svgPath += ` L ${point.x} ${point.y}`;\n    }\n\n    this._path.setAttribute('d', svgPath);\n\n    const stylus = this._sketchModel.lastPoint;\n    this._stylus.setAttribute('x1', stylus.x);\n    this._stylus.setAttribute('x2', stylus.x);\n    this._stylus.setAttribute('y1', stylus.y);\n    this._stylus.setAttribute('y2', stylus.y);\n  }\n\n  _onShake() {\n    if (this._sketchModel.shake()) {\n      const newPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n      const start = this._sketchModel.path[0];\n      const initialPath = `M ${start.x - 2} ${start.y - 2} M ${start.x + 2} ${start.y + 2} M ${start.x} ${start.y}`;\n\n      newPath.setAttributeNS(null, 'd', initialPath);\n      newPath.classList.add('sketch-path');\n\n      const erasedSketch = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      erasedSketch.classList.add('erased-sketch');\n      erasedSketch.setAttributeNS(null, 'preserveAspectRatio', 'none');\n      erasedSketch.setAttributeNS(null, 'x', '0');\n      erasedSketch.setAttributeNS(null, 'y', '0');\n      erasedSketch.setAttributeNS(null, 'viewBox', '0 0 300 300');\n      erasedSketch.setAttributeNS(null, 'height', '100%');\n      erasedSketch.style.opacity = '1';\n\n      erasedSketch.appendChild(this._path);\n      this._path = newPath;\n      this._activeSketch.insertBefore(this._path, this._stylus);\n      this._screen.insertBefore(erasedSketch, this._activeSketch);\n    }\n\n    this._screen.querySelectorAll('.erased-sketch').forEach(erasedSketch => {\n      let opacity = Number.parseFloat(erasedSketch.style.opacity);\n      if (opacity <= 0) {\n        this._screen.removeChild(erasedSketch);\n      } else {\n        opacity -= 0.21;\n        const blur = 1 - opacity;\n        erasedSketch.style.opacity = opacity;\n        erasedSketch.style.filter = 'blur(' + blur + 'vw)';\n      }\n    });\n  }\n\n  _toggleDetail() {\n    switch (this._detailButton.value) {\n      case 'fast':\n        this._screen.classList.add('fast');\n        this._screen.classList.remove('fanciest');\n        this._screen.classList.remove('fancy');\n        this._detailButton.textContent = '✨ Fancy';\n        this._detailButton.value = 'fancy';\n        break;\n      case 'fancy':\n        this._screen.classList.add('fancy');\n        this._screen.classList.remove('fanciest');\n        this._screen.classList.remove('fast');\n        this._detailButton.textContent = '🌈 Fanciest';\n        this._detailButton.value = 'fanciest';\n        break;\n      case 'fanciest':\n        this._screen.classList.add('fanciest');\n        this._screen.classList.remove('fancy');\n        this._screen.classList.remove('fast');\n        this._detailButton.textContent = '🚀 Fast';\n        this._detailButton.value = 'fast';\n        break;\n    }\n  }\n}\n","// Copyright 2018 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { TouchKnob } from './touch-knob.js';\nimport { SkebCase } from './skeb-case.js';\nimport { ToggleFullscreen } from './toggle-fullscreen.js';\n\nwindow.customElements.define('touch-knob', TouchKnob);\nwindow.customElements.define('skeb-case', SkebCase);\nwindow.customElements.define('toggle-fullscreen', ToggleFullscreen);\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function () {\n    navigator.serviceWorker\n      .register('/sw.js')\n      .then(function (registration) { });\n  });\n}","// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport class TouchKnob extends HTMLElement {\n  constructor() {\n    super();\n    this._angle = 1;\n    this._canDraw = true;\n    this._rotations = 0;\n    this._scale = 10;\n    this._TWO_PI = 2 * Math.PI;\n    this.min = 0;\n    this.max = 298;\n\n    this._drawState = this._drawState.bind(this);\n    this._onMousedown = this._onMousedown.bind(this);\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseup = this._onMouseup.bind(this);\n    this._onPointerdown = this._onPointerdown.bind(this);\n    this._onPointermove = this._onPointermove.bind(this);\n    this._onPointerup = this._onPointerup.bind(this);\n    this._onTouchend = this._onTouchend.bind(this);\n    this._onTouchmove = this._onTouchmove.bind(this);\n    this._onTouchstart = this._onTouchstart.bind(this);\n  }\n\n  get value() {\n    return this.hasAttribute('value') ? this.getAttribute('value') : 0;\n  }\n\n  set value(value) {\n    this.setAttribute('value', value);\n  }\n\n  connectedCallback() {\n    this.style.setProperty('transform', 'rotate(' + this._angle + 'rad)');\n    if ('PointerEvent' in window) {\n      this.addEventListener('pointerdown', this._onPointerdown);\n    } else {\n      this.addEventListener('touchstart', this._onTouchstart);\n      this.addEventListener('mousedown', this._onMousedown);\n    }\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('pointerdown', this._onPointerdown);\n    this.removeEventListener('touchstart', this._onTouchstart);\n    this.removeEventListener('mousedown', this._onMousedown);\n  }\n\n  _onMousedown(e) {\n    this._touchX = e.clientX;\n    this._touchY = e.clientY;\n\n    this._handleStart();\n\n    document.addEventListener('mousemove', this._onMousemove);\n    document.addEventListener('mouseup', this._onMouseup);\n  }\n\n  _onMousemove(e) {\n    e.preventDefault();\n    this._touchX = e.clientX;\n    this._touchY = e.clientY;\n\n    this._handleMove();\n  }\n\n  _onMouseup(e) {\n    e.preventDefault();\n\n    document.removeEventListener('mousemove', this._onMousemove);\n    document.removeEventListener('mouseup', this._onMouseup);\n\n    this._handleEnd();\n  }\n\n  _onTouchstart(e) {\n    e.preventDefault();\n    window.oncontextmenu = () => { return false; };\n\n    this._touchX = e.changedTouches[0].clientX;\n    this._touchY = e.changedTouches[0].clientY;\n\n    this._handleStart();\n\n    this.addEventListener('touchmove', this._onTouchmove);\n    this.addEventListener('touchend', this._onTouchend);\n    this.addEventListener('touchcancel', this._onTouchend);\n  }\n\n  _onTouchmove(e) {\n    e.preventDefault();\n\n    this._touchX = e.targetTouches[0].clientX;\n    this._touchY = e.targetTouches[0].clientY;\n\n    this._handleMove();\n  }\n\n  _onTouchend(e) {\n    e.preventDefault();\n    window.oncontextmenu = null;\n\n    this.removeEventListener('touchmove', this._onTouchmove);\n    this.removeEventListener('touchend', this._onTouchend);\n    this.removeEventListener('touchcancel', this._onTouchend);\n\n    this._handleEnd();\n  }\n\n  _onPointerdown(e) {\n    e.preventDefault();\n    window.oncontextmenu = () => { return false; };\n\n    this._touchX = e.clientX;\n    this._touchY = e.clientY;\n    this.setPointerCapture(e.pointerId);\n\n    this._handleStart();\n\n    this.addEventListener('pointermove', this._onPointermove);\n    this.addEventListener('pointerup', this._onPointerup);\n    this.addEventListener('pointercancel', this._onPointerup);\n  }\n\n  _onPointermove(e) {\n    e.preventDefault();\n    this._touchX = e.clientX;\n    this._touchY = e.clientY;\n\n    this._handleMove();\n  }\n\n  _onPointerup(e) {\n    e.preventDefault();\n    window.oncontextmenu = null;\n\n    this.releasePointerCapture(e.pointerId);\n    this.removeEventListener('pointermove', this._onPointermove);\n    this.removeEventListener('pointerup', this._onPointerup);\n    this.removeEventListener('pointercancel', this._onPointerup);\n\n    this._handleEnd();\n  }\n\n  _handleStart() {\n    this._centerX = this.offsetLeft - this.scrollLeft + this.clientLeft + this.offsetWidth / 2;\n    this._centerY = this.offsetTop - this.scrollTop + this.clientTop + this.offsetHeight / 2;\n\n    this._initialAngle = this._angle;\n    this._initialValue = parseFloat(this.value);\n    this._initialTouchAngle = Math.atan2(\n      this._touchY - this._centerY,\n      this._touchX - this._centerX\n    );\n\n    this._attemptedAngle = this._angle;\n    this._attemptedRotations = this._rotations;\n    this._attemptedValue = this.value;\n\n    const evt = new CustomEvent('touch-knob-start', { bubbles: true });\n    this.dispatchEvent(evt);\n  }\n\n  _handleMove() {\n    if (this._canDraw === true) {\n      this._canDraw = false;\n      window.requestAnimationFrame(this._drawState);\n    }\n\n    const evt = new CustomEvent('touch-knob-move', { bubbles: true });\n    this.dispatchEvent(evt);\n  }\n\n  _handleEnd() {\n    const evt = new CustomEvent('touch-knob-end', { bubbles: true });\n    this.dispatchEvent(evt);\n  }\n  _drawState() {\n    const previousAttemptedAngle = this._attemptedAngle;\n    this._attemptedAngle =\n      this._initialAngle - this._initialTouchAngle\n      + Math.atan2(this._touchY - this._centerY, this._touchX - this._centerX);\n    this._attemptedAngle = this._attemptedAngle\n      - this._TWO_PI * Math.floor((this._attemptedAngle + Math.PI) / this._TWO_PI);\n\n    if (\n      previousAttemptedAngle > -1.57 && previousAttemptedAngle < 0\n      && this._attemptedAngle >= 0 && this._attemptedAngle <= 1.57\n    ) {\n      this._attemptedRotations++;\n    } else if (\n      previousAttemptedAngle < 1.57 && previousAttemptedAngle > 0\n      && this._attemptedAngle <= 0 && this._attemptedAngle >= -1.57\n    ) {\n      this._attemptedRotations--;\n    }\n\n    if (this._attemptedAngle >= 0) {\n      this._attemptedValue =\n        (this._attemptedAngle + this._TWO_PI * this._attemptedRotations) * this._scale;\n    } else if (this._attemptedAngle < 0) {\n      this._attemptedValue =\n        (this._attemptedAngle + this._TWO_PI * (this._attemptedRotations + 1)) * this._scale;\n    }\n\n    if (this._attemptedValue >= this.min && this._attemptedValue <= this.max) {\n      this.value = this._attemptedValue;\n      this._rotations = this._attemptedRotations;\n      this._angle = this._attemptedAngle;\n      this.style.setProperty('transform', `rotate(${this._angle}rad)`);\n    }\n\n    this._canDraw = true;\n  }\n}","// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport class ToggleFullscreen extends HTMLElement {\n\n  constructor() {\n    super();\n\n    this._onFullscreenchange = this._onFullscreenchange.bind(this);\n    this._toggleFullscreen = this._toggleFullscreen.bind(this);\n  }\n\n\n  connectedCallback() {\n    document.addEventListener('fullscreenchange', this._onFullscreenchange, { capture: false, passive: true });\n\n    this._fullscreenButton = this.querySelector('.button-fullscreen');\n    this._fullscreenButton.addEventListener('click', this._toggleFullscreen, { capture: false, passive: true });\n  }\n\n  disconnectedCallback() {\n    this._fullscreenButton.removeEventListener('click', this._toggleFullscreen);\n  }\n\n  _onFullscreenchange() {\n    if (document.fullscreenElement !== null) {\n      this._fullscreenButton.textContent = '⤵️ Normal screen';\n    } else {\n      this._fullscreenButton.textContent = '⤴️ Fullscreen';\n    }\n  }\n\n  _toggleFullscreen() {\n    if (!document.fullscreenElement) {\n      document.documentElement.requestFullscreen();\n    } else {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      }\n    }\n  }\n}"],"names":["global","factory","getSqSegDist","p","p1","p2","x","y","dx","dy","t","simplifyDouglasPeucker","points","sqTolerance","last","length","simplified","simplifyDPStep","first","index","maxSqDist","i","sqDist","push","simplify","tolerance","highestQuality","undefined","point","prevPoint","newPoints","len","simplifyRadialDist","define","amd","module","exports","default","self","window","this","document","Shake","options","hasDeviceMotion","threshold","timeout","hasOwnProperty","lastTime","Date","lastX","lastY","lastZ","CustomEvent","event","bubbles","cancelable","createEvent","initEvent","prototype","reset","start","addEventListener","stop","removeEventListener","devicemotion","e","deltaX","deltaY","deltaZ","current","accelerationIncludingGravity","z","Math","abs","getTime","dispatchEvent","handleEvent","type","Sketch","[object Object]","startingPoint","path","erasedPaths","_lastAngle","lastPoint","parseFloat","angle","atan2","pop","customElements","HTMLElement","super","_angle","_canDraw","_rotations","_scale","_TWO_PI","PI","min","max","_drawState","bind","_onMousedown","_onMousemove","_onMouseup","_onPointerdown","_onPointermove","_onPointerup","_onTouchend","_onTouchmove","_onTouchstart","value","hasAttribute","getAttribute","setAttribute","style","setProperty","_touchX","clientX","_touchY","clientY","_handleStart","preventDefault","_handleMove","_handleEnd","oncontextmenu","changedTouches","targetTouches","setPointerCapture","pointerId","releasePointerCapture","_centerX","offsetLeft","scrollLeft","clientLeft","offsetWidth","_centerY","offsetTop","scrollTop","clientTop","offsetHeight","_initialAngle","_initialValue","_initialTouchAngle","_attemptedAngle","_attemptedRotations","_attemptedValue","evt","requestAnimationFrame","previousAttemptedAngle","floor","_lastSketchAngle","_onShake","_optimizeSketch","_requestOptimizeSketch","_requestUpdateSketch","_toggleDetail","_updateSketch","_sketchModel","_screen","querySelector","_activeSketch","_path","_stylus","_horzKnob","_vertKnob","capture","passive","_shakeDetector","_shakeButton","_detailButton","moveTo","_drawSketch","simplifyPath","svgPath","stylus","shake","newPath","createElementNS","initialPath","setAttributeNS","classList","add","erasedSketch","opacity","appendChild","insertBefore","querySelectorAll","forEach","Number","removeChild","blur","filter","remove","textContent","_onFullscreenchange","_toggleFullscreen","_fullscreenButton","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","navigator","serviceWorker","register","then","registration"],"mappings":"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"}